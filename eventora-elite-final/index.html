
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AirRoute-Hub | Flight Booking</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: #f4f6f9;
        }

        header {
            background: #1e3a8a;
            color: white;
            padding: 15px;
            text-align: center;
        }

        .container {
            padding: 20px;
        }

        .search-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        input, select, button {
            padding: 10px;
            margin: 8px;
            width: 200px;
        }

        button {
            background: #1e3a8a;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background: #3749c7;
        }

        .flights {
            margin-top: 20px;
        }

        .flight-card {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>

<header>
    <h1>✈️ AirRoute-Hub</h1>
    <p>Smart Flight Booking System</p>
</header>

<div class="container">

    <!-- Search Section -->
    <div class="search-box">
        <h2>Search Flights</h2>

        <input type="text" id="from" placeholder="From">
        <input type="text" id="to" placeholder="To">
        <input type="date" id="date">

        <button onclick="searchFlights()">Search</button>
    </div>

    <!-- Flight Results -->
    <div class="flights" id="flightResults"></div>

    <!-- Booking Section -->
    <div id="bookingSection" class="hidden">
        <h2>Book Ticket</h2>

        <input type="text" id="name" placeholder="Passenger Name">

        <h3>Select Food</h3>
        <label><input type="checkbox" value="200"> Meal - ₹200</label><br>
        <label><input type="checkbox" value="100"> Snacks - ₹100</label><br>
        <label><input type="checkbox" value="50"> Drink - ₹50</label><br>

        <br>
        <button onclick="confirmBooking()">Confirm Booking</button>
    </div>

    <!-- Receipt -->
    <div id="receiptSection" class="hidden">
        <h2>Receipt</h2>
        <p id="receiptText"></p>
        <button onclick="downloadReceipt()">Download Receipt</button>
    </div>

</div>

<script>
    const flights = [
        { name: "IndiGo 101", from: "Chennai", to: "Madurai", price: 2500 },
        { name: "Air India 202", from: "Chennai", to: "Coimbatore", price: 3000 },
        { name: "SpiceJet 303", from: "Chennai", to: "Trichy", price: 2200 }
    ];

    let selectedFlight = null;

    function searchFlights() {
        const from = document.getElementById("from").value;
        const to = document.getElementById("to").value;

        const results = flights.filter(f => f.from === from && f.to === to);

        const container = document.getElementById("flightResults");
        container.innerHTML = "";

        if (results.length === 0) {
            container.innerHTML = "<p>No flights found</p>";
            return;
        }

        results.forEach(flight => {
            const div = document.createElement("div");
            div.className = "flight-card";

            div.innerHTML = `
                <div>
                    <h3>${flight.name}</h3>
                    <p>${flight.from} → ${flight.to}</p>
                    <p>₹${flight.price}</p>
                </div>
                <button onclick="selectFlight('${flight.name}')">Book</button>
            `;

            container.appendChild(div);
        });
    }

    function selectFlight(name) {
        selectedFlight = flights.find(f => f.name === name);
        document.getElementById("bookingSection").classList.remove("hidden");
    }

    function confirmBooking() {
        const name = document.getElementById("name").value;

        let foodCost = 0;
        document.querySelectorAll('input[type="checkbox"]:checked')
            .forEach(item => foodCost += parseInt(item.value));

        const total = selectedFlight.price + foodCost;

        document.getElementById("receiptText").innerText =
            `Passenger: ${name}\nFlight: ${selectedFlight.name}\nTotal: ₹${total}`;

        document.getElementById("receiptSection").classList.remove("hidden");
    }

    function downloadReceipt() {
        const text = document.getElementById("receiptText").innerText;

        const blob = new Blob([text], { type: "text/plain" });
        const link = document.createElement("a");

        link.href = URL.createObjectURL(blob);
        link.download = "receipt.txt";
        link.click();

        // FIX: prevent UI freeze
        setTimeout(() => {
            URL.revokeObjectURL(link.href);
        }, 100);
    }
</script>

</body>
</html>
